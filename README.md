# 🌍 My Planet - 나만의 여행 지도

**My Planet**은 3D 지구본과 보드게임 스타일로 방문한 국가를 시각화하고 기록하는 인터랙티브 웹 애플리케이션입니다.

**데스크탑 모드와 모바일 모드를 모두 지원하는 반응형 웹앱**으로, 어떤 기기에서든 최적화된 경험을 제공합니다.

**스팀 게임 스타일의 UI**와 **유머러스한 챗봇**을 통해 여행 기록을 재미있게 관리할 수 있으며, **캡처하여 SNS 공유하거나 개인 소장**하기에도 좋습니다.

**스팀 게임 스타일의 UI**와 **유머러스한 챗봇**을 통해 여행 기록을 재미있게 관리할 수 있으며, **캡처하여 SNS 공유하거나 개인 소장**하기에도 좋습니다.

## 👤 제작자

**신한은행 디지털서비스개발부 김지원**

## 🛠️ 개발 도구

- **개발 환경**: Cursor, Gemini CLI
- **AI 활용**: GPT OpenAI API (개발 전 과정에서 AI 활용)
- **3D 작업**: React Three Fiber를 활용한 3D 지구본 구현

## 📅 개발 일정

**총 3일간 개발**

- **12월 8일 (월)**: 기획
- **12월 9일 (화)**: 하루 동안 개발 완료
- **12월 10일 (수)**: 발표자료, 영상자료, 버그수정

## ✨ 주요 기능

### 🎯 3가지 뷰 모드

1. **둥근 모드 (3D Globe)** 🌐

   - React Three Fiber를 활용한 3D 지구본
   - 드래그로 회전, 스크롤로 확대/축소
   - 방문한 국가에 국기 깃발 표시
   - 별과 함께 아름다운 우주 배경
   - 국가 정보 툴팁 (호버/터치 시 표시)
   - 북반구/남반구에 따라 툴팁 위치 자동 조정

2. **평평 모드 (Flat Map)** 🗺️

   - 2D 평면 지도 뷰
   - SVG 기반 Equirectangular 프로젝션
   - 방문한 국가에 국기 마커와 방문 횟수 표시
   - 비행기 애니메이션 (랜덤 이동)
   - 국가 정보 툴팁 (호버/터치 시 표시)
   - 전체화면 모드 및 이미지 다운로드

3. **트래블마블 모드 (Board Game)** 🎲
   - 보드게임 스타일의 3D 보드 뷰
   - 국가를 카드 형태로 배치
   - 드래그로 보드 회전, 확대/축소 가능
   - 방문한 국가 카드에 국기 배지 표시
   - 마우스 오버 시 툴팁으로 국가 이름 표시
   - 실시간 환율 정보 표시 (접기/펼치기, 드래그 이동 가능)
   - 3개 탭 시스템: 평점, 정보, 혜택

### 📊 국가 관리 기능

- **196개국 지원**: 전 세계 모든 국가 데이터 포함
- **대륙별 필터링**: 아시아, 아프리카, 유럽, 북미, 남미, 오세아니아
- **국가 검색**: 한글/영어로 국가 검색
- **방문 횟수 관리**: 각 국가별 방문 횟수 기록 및 증감
- **통계 표시**: 방문한 국가 수, 총 방문 횟수, 세계 정복률
- **통계 카드**: 드래그/터치로 이동 가능, 접기/펼치기 기능

### ⭐ 평점 및 리뷰 시스템

- **별점 평가**: 1~5점 별점 시스템
- **한줄평 작성**: 각 국가에 대한 한줄평 기록
- **이모티콘 표시**: 평점에 따른 이모티콘 자동 표시
  - 5점: 😄 (활짝 웃음)
  - 4점: 🙂 (웃음)
  - 3점: 😐 (적당한 표정)
  - 2점: 😕 (안 좋은 표정)
  - 1점: 😠 (화난 표정)
- **평점 모달**: 국가 선택 시 평점 추가/수정 가능
- **데이터 동기화**: 로그인 사용자는 Supabase, 비로그인 사용자는 LocalStorage

### 📝 국가 정보

각 국가별로 다음 정보 제공:

- **주요 여행지**: 1-2줄의 주요 관광지 정보
- **국가 정보**: 1-2줄의 국가 기본 정보
- **여행 일기**: 사진과 함께 여행 추억 기록 (로그인 사용자만)
- **툴팁**: 깃발에 호버/터치 시 국가 정보 표시

### 🤖 AI 여행 추천 챗봇

- **AI 기반 여행지 추천**: OpenAI GPT를 활용한 맞춤형 여행지 추천
- **랜덤 여행 뽑기**: 분기 질문 기반 추천 시스템
- **자연어 대화**: 예산, 선호도, 관심사에 맞춰 대화형 추천
- **SSE 스트리밍**: 실시간 응답 스트리밍
- **일일 제한**: 일반 사용자 10회, 관리자 100회
- **로그인 필수**: 보안을 위해 로그인한 사용자만 사용 가능

### 💱 환율 정보

- **실시간 환율**: 주요 통화 10개 표시 (USD, EUR, JPY, CNY, HKD, TWD, SGD, VND, THB, MYR)
- **트래블마블 모드**: 우측 중간에 환율표 표시
- **접기/펼치기**: 헤더 버튼으로 토글
- **드래그 이동**: 마우스/터치로 자유롭게 이동
- **모바일 최적화**: 모바일에서 기본 접힘 상태

### 🏆 성취 시스템

방문한 국가 수에 따른 동기부여 메시지:

- 0~4개: 🌱 여행의 첫걸음을 시작했어요!
- 5~9개: ✈️ 여행자로서 성장 중이에요!
- 10~19개: 🌍 진정한 여행자가 되어가고 있어요!
- 20~29개: 🏆 세계를 탐험하는 모험가!
- 30~49개: 🌟 이 정도면 거의 트래블마블 세계정복 빌런!
- 50~99개: 👑 세계 정복의 길을 걷고 있어요!
- 100개 이상: 🌐 전설적인 여행자! 당신은 진정한 세계인!

### 👤 사용자 계정 시스템

- **회원가입/로그인**: 이메일/비밀번호 기반 인증
- **이메일 인증**: 회원가입 후 이메일 인증 필요
- **비밀번호 변경**: 마이페이지에서 비밀번호 변경 가능
- **여행 성향 설정**: 10개 질문으로 여행 선호도 설정
- **데이터 동기화**: 다중 기기 간 자동 동기화

### 🔐 관리자 기능

- **관리자 페이지**: 특정 이메일만 접근 가능
- **사용자 목록**: 등록된 사용자 목록 조회
- **통계 정보**: 사용자 수, 이메일 인증 현황 등

## 🛠️ 기술 스택

### Frontend

- **Next.js 16.0.7**: React 프레임워크 (App Router, Proxy API)
- **React 19.2.0**: UI 라이브러리
- **TypeScript**: 타입 안정성
- **Tailwind CSS 4**: 스타일링

### Backend & Database

- **Supabase**: 인증, 데이터베이스, 스토리지
  - PostgreSQL 데이터베이스
  - Row Level Security (RLS)
  - 실시간 데이터 동기화
  - 파일 스토리지

### AI & API

- **OpenAI GPT**: 여행지 추천 챗봇
- **@supabase/ssr**: 서버 사이드 렌더링 지원
- **환율 API**: open.er-api.com (실시간 환율 정보)

### 3D 그래픽스

- **React Three Fiber**: React용 Three.js 렌더러
- **@react-three/drei**: 3D 헬퍼 컴포넌트
  - `OrbitControls`: 카메라 컨트롤
  - `Stars`: 별 배경
  - `Html`: 3D 공간 내 HTML 오버레이
  - `Sphere`: 지구본 메시
  - `Billboard`: 카메라를 향하는 오브젝트

### 데이터 저장

- **Supabase**: 클라우드 데이터베이스 (인증, 방문 국가, 평점, 여행 일기)
- **LocalStorage**: 비로그인 사용자용 임시 저장 (평점/리뷰만, 휘발성)
- **Supabase Storage**: 여행 사진 저장

## 📁 프로젝트 구조

```
src/
├── app/
│   ├── layout.tsx              # 루트 레이아웃
│   ├── page.tsx                # 메인 페이지
│   ├── globals.css             # 전역 스타일
│   ├── login/                  # 로그인 페이지
│   ├── signup/                 # 회원가입 페이지
│   ├── mypage/                 # 마이페이지
│   ├── admin/                  # 관리자 페이지
│   ├── api/
│   │   ├── chat/               # AI 챗봇 API
│   │   └── travel/             # 여행 추천 API
│   └── auth/
│       └── callback/           # 인증 콜백
├── components/
│   ├── BoardGame.tsx           # 트래블마블 모드
│   ├── CountrySelector.tsx     # 국가 선택 사이드바
│   ├── Earth.tsx               # 3D 지구본 컴포넌트
│   ├── FlatMap.tsx             # 평평 모드 (2D 지도)
│   ├── ModeToggle.tsx          # 모드 전환 토글
│   ├── Scene.tsx               # 3D 씬 설정
│   ├── AIChatbot.tsx           # AI 챗봇 컴포넌트
│   ├── AIRobotButton.tsx       # AI 챗봇 버튼
│   └── EmailVerificationBanner.tsx  # 이메일 인증 배너
├── lib/
│   ├── countries.ts            # 국가 데이터 (196개국)
│   ├── auth.ts                 # 인증 유틸리티
│   ├── travelQuestions.ts      # 여행 질문 풀
│   ├── supabase/
│   │   ├── client.ts           # 클라이언트 Supabase
│   │   ├── server.ts           # 서버 Supabase
│   │   ├── admin.ts            # 관리자 Supabase
│   │   ├── visitedCountries.ts # 방문 국가 API
│   │   ├── ratings.ts          # 평점 API
│   │   ├── memories.ts        # 여행 일기 API
│   │   └── storage.ts          # 파일 스토리지 API
│   ├── indexedDB.ts            # IndexedDB 유틸리티 (레거시)
│   └── localStorage.ts         # LocalStorage 유틸리티
└── proxy.ts                    # Next.js 16 Proxy (인증 미들웨어)
```

## 🚀 시작하기

### 사전 요구사항

- Node.js 18+ 설치
- Supabase 프로젝트 생성
- OpenAI API 키 (AI 챗봇 사용 시)

### 설치

```bash
npm install
```

### 환경 변수 설정

프로젝트 루트에 `.env.local` 파일을 생성하고 다음 내용을 입력:

```env
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key
OPENAI_API_KEY=your_openai_api_key
NEXT_PUBLIC_SITE_URL=your_site_url
```

**참고**:

- Supabase 설정은 Supabase Dashboard에서 프로젝트를 생성한 후 API 키를 가져와야 합니다.
- OpenAI API 키는 OpenAI 플랫폼에서 발급받을 수 있습니다.
- `.env.local` 파일은 Git에 커밋되지 않습니다.

### Supabase 설정

1. **프로젝트 생성**: Supabase Dashboard에서 새 프로젝트 생성
2. **데이터베이스 스키마**: `supabase/schema.sql` 파일의 내용을 SQL Editor에서 실행
3. **Storage 버킷**: `travel-photos` 버킷 생성 (Public)
4. **RLS 정책**: 스키마에 포함된 RLS 정책이 자동으로 적용됩니다

### 개발 서버 실행

```bash
npm run dev
```

브라우저에서 [http://localhost:3000](http://localhost:3000)을 열어 확인하세요.

### 빌드

```bash
npm run build
npm start
```

### 배포

Vercel 배포 시 Vercel 대시보드에서 환경 변수를 별도로 설정해야 합니다.

## 🎨 디자인 컨셉

### 컬러 팔레트

- **배경**: `#FCECA3` (밝은 노란색)
- **주요 블루**: `#5AA8E5`, `#1F6FB8`, `#163C69`
- **강조 노란색**: `#F8D348`, `#F2B705`
- **방문 국가 빨강**: `#EA3E38`, `#D72C2A`
- **배경 하늘색**: `#E3F2FD`

### UI 특징

- 카드 기반 디자인
- 부드러운 그림자 효과
- 호버 및 클릭 애니메이션
- **완전 반응형 디자인**: 데스크탑 모드와 모바일 모드를 모두 지원
- 드래그 가능한 UI 요소
- 터치 제스처 지원 (모바일)

## 📱 주요 기능 상세

### 국가 선택 및 관리

- 사이드바에서 국가 검색 및 선택
- 대륙별 필터링
- 방문 횟수 증감 버튼
- 평점 추가 버튼 (방문한 국가만)
- 모바일에서 대륙 클릭 시 방문 국가 목록 표시

### 데이터 저장

- **로그인 사용자**: Supabase 클라우드에 저장 (다중 기기 동기화)
- **비로그인 사용자**:
  - 방문 국가: 휘발성 (새로고침 시 초기화)
  - 평점/리뷰: LocalStorage에 저장 (동기화)
- **자동 동기화**: 로그인 상태에서 실시간 데이터 동기화
- **여행 사진**: Supabase Storage에 저장

### 3D 인터랙션

- **둥근 모드**: 마우스 드래그로 지구본 회전, 스크롤로 확대/축소 (데스크탑), 터치 제스처 지원 (모바일)
- **트래블마블 모드**: 보드 드래그로 회전, 확대/축소 버튼 제공, 90도 회전 버튼 (모바일에서 세로 배치)
- **평평 모드**: 전체화면 모드 및 이미지 다운로드

### 반응형 디자인

- **데스크탑 모드**: 마우스 인터랙션, 호버 효과, 넓은 화면 레이아웃
- **모바일 모드**: 터치 제스처, 최적화된 버튼 크기, 세로 배치, 인앱 브라우저 대응
- **자동 감지**: 화면 크기에 따라 자동으로 최적화된 UI 제공

### 툴팁 시스템

- **둥근 모드**: 깃발 호버/터치 시 국가 정보 툴팁 (북반구는 아래, 남반구는 위)
- **평평 모드**: 깃발 호버/터치 시 국가 정보 툴팁
- **트래블마블 모드**: 방문 국가 카드 호버 시 국가 이름 표시

## 🎲 랜덤 여행지 추천 시스템

### 핵심 컨셉

- **사주 느낌**: 랜덤한 척 하지만 실제로는 똑똑한 알고리즘
- **분기 질문만**: 사용자는 텍스트 입력 불가, 버튼 선택만 가능
- **하루 제한**: 일반 사용자 10회, 관리자 100회
- **캐릭터 기반**: 지구본 여행자 캐릭터가 대답

### 알고리즘 규칙

스코어링 요소:

1. **🎉 세계 축제 & 이벤트** (30%)
2. **🌤 계절** (20%)
3. **❤️ 사용자 성향** (20%)
4. **🧳 가본 곳** (15%)
5. **💱 세계 환율** (15%)

상위 3개 후보를 LLM에 전달하여 최종 추천 생성

### 사용자 플로우

1. 초기 진입: 방문 횟수 기반 "부자야?" 멘트 (1회만)
2. 메인 화면: 남은 추천 횟수 표시
3. 분기 질문: 여행 스타일, 거리, 예산 선택
4. 추천 결과: LLM 생성 추천 멘트 및 이유 설명
5. 하루 제한 초과: 친근한 안내 메시지

## ✅ 구현 완료

- [x] 사용자 계정 시스템 (Supabase Auth)
- [x] 클라우드 데이터 동기화 (Supabase)
- [x] 여행 사진 업로드 (Supabase Storage)
- [x] 여행 일기 기능 (트래블마블 모드)
- [x] AI 여행 추천 챗봇 (OpenAI GPT)
- [x] 랜덤 여행지 추천 시스템
- [x] 모바일 반응형 UI 개선
- [x] 인앱 브라우저 대응
- [x] 국가 정보 툴팁 시스템
- [x] 실시간 환율 정보 표시
- [x] 드래그 가능한 UI 요소
- [x] 관리자 페이지

## 💼 상업적 활용 가능성

이 앱은 다양한 방식으로 상업화가 가능합니다:

### 금융 상품 연동

- **트래블카드 가입 권유**: 해외 여행 시 추천 카드 상품 안내
- **로밍 상품 가입 권유**: 통신사 로밍 상품 추천 및 가입 링크
- **여행 보험 상품 가입 권유**: 국가별 맞춤 여행 보험 추천
- **여행 적금**: 목표 국가를 위한 여행 적금 상품 연동

### 여행 산업 연동

- 항공사, 호텔, 투어 상품 연동
- 지역별 관광 정보 및 예약 시스템
- 여행 패키지 상품 추천

## 🎓 교육적 활용

- **아이들 교육용**: 세계 지리 학습, 국가별 문화 이해
- **인터랙티브 학습**: 3D 지구본을 통한 시각적 학습
- **게임화된 교육**: 보드게임 스타일로 재미있게 학습

## 🎮 게임 스타일 UI

- **스팀 게임 스타일**: 다양한 게임 UI 요소를 최대한 반영
- **인터랙티브 요소**: 드래그, 회전, 확대/축소 등 게임 같은 조작감
- **성취 시스템**: 방문 국가 수에 따른 동기부여 메시지
- **보드게임 컨셉**: 트래블마블 모드의 보드게임 스타일

## 😄 유머러스한 요소

- **AI 챗봇**: 재치 있고 친근한 말투의 여행 추천
- **"부자야?" 멘트**: 방문 횟수 기반 유머러스한 진단
- **알고리즘 설명**: "랜덤한 척 하지만 실제로는 똑똑한 알고리즘" 드립
- **서버비 드립**: 가난한 개발자 보호 모드 등 유머 요소

## 📸 SNS 공유 및 개인 소장

- **캡처 기능**: 평평 모드에서 전체화면 이미지 다운로드
- **SNS 공유**: 여행 기록을 이미지로 공유
- **개인 소장**: 여행 지도를 이미지로 저장하여 추억 보관
- **비행기 애니메이션**: 공유용 이미지에 동적 요소 포함

## 🚀 확장 가능성

이 앱은 다양한 방향으로 확장이 가능합니다:

### 커뮤니티 기능

- 친구와 여행 기록 비교
- 여행 경험 공유 커뮤니티
- 여행 팁 및 후기 공유

### 여행 일기 확장

- 상세한 여행 일기 작성
- 사진 갤러리 확장
- 여행 경로 추적
- 여행 비용 관리

### 다른 앱/사업 연동

- **여행 앱**: 항공 예약, 호텔 예약 앱 연동
- **지도 앱**: 구글 맵, 네이버 지도 등 연동
- **소셜 미디어**: 인스타그램, 페이스북 등 연동
- **금융 앱**: 신한은행 앱 등 금융 서비스 연동

### 지도 확장

- **국가별 지역 확장**: 각 나라의 특정 지역까지 상세 지도
- **한국 지도 확장**: 전국 8도, 광역시, 각 지역 상세 지도
- **도시 레벨 확장**: 주요 도시의 상세 지도 및 관광지 표시

### 사용자 타겟 확장

- **커플앱**: 커플 여행 기록 공유 및 계획
- **가족앱**: 가족 단위 여행 기록 및 공유
- **개인앱**: 개인 여행 기록 및 목표 관리
- **그룹앱**: 친구 그룹, 동아리 등 그룹 여행 관리

### 산업별 연동

- **여행 관광 산업**: 관광청, 여행사, 호텔 체인 등
- **금융 회사**: 신한은행 등 금융 상품 연동
- **통신사**: 로밍 상품, 해외 통신 서비스
- **항공사**: 항공권 예약 및 마일리지 연동

## 🔮 향후 계획

- [ ] 친구와 비교 기능
- [ ] 여행 통계 및 차트
- [ ] 국가별 혜택 정보 추가
- [ ] 소셜 공유 기능
- [ ] 오프라인 모드 지원
- [ ] 다국어 지원
- [ ] 커뮤니티 기능
- [ ] 상세 여행 일기 확장
- [ ] 지역별 상세 지도
- [ ] 다른 앱/서비스 연동

## 📄 라이선스

이 프로젝트는 개인 프로젝트입니다.

---

**My Planet**으로 당신만의 여행 지도를 만들어보세요! 🌍✈️
